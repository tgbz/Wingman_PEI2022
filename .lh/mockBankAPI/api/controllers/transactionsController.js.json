{
    "sourceFile": "mockBankAPI/api/controllers/transactionsController.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1674752980211,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1674752980211,
            "name": "Commit-0",
            "content": "var mongoose = require(\"mongoose\");\r\nvar Transaction = require(\"../models/transaction\");\r\nvar Transactions = module.exports;\r\n\r\nvar tipos = [\"Debito\", \"Credito\"];\r\n\r\nvar moeda = [\"EUR\", \"USD\"];\r\n\r\nvar categoriasDebito = [\r\n  \"Casa\",\r\n  \"Mobilidade\",\r\n  \"Desporto\",\r\n  \"Impostos e Taxas\",\r\n  \"Cultura e Hobbies\",\r\n  \"Restaurantes e Cafés\",\r\n  \"Saúde\",\r\n  \"Viagens\",\r\n  \"Educação\",\r\n  \"Sem Categoria\",\r\n  \"Supermercados e Lojas\",\r\n  \"Credito e Comissões\",\r\n  \"Seguros\",\r\n  \"Entretenimento\",\r\n  \"Investimentos\",\r\n];\r\n\r\nvar categoriasCredito = [\"Familia\", \"Investimentos\", \"Sem Categoria\"];\r\n\r\nvar emissoresDebitoSemCategoria = [\r\n  \"Pagamento\",\r\n  \"Transferencia\",\r\n  \"Levantamento ATM\",\r\n];\r\nvar emissoresCreditoSemCategoria = [\"Transferencia\", \"Depósito ATM\"];\r\n\r\nvar emissoresDebitoCasa = [\r\n  \"EDP\",\r\n  \"Vodafone\",\r\n  \"MEO\",\r\n  \"NOS\",\r\n  \"Gás Natural\",\r\n  \"Gold Energy\",\r\n  \"Endesa\",\r\n  \"Iberdrola\",\r\n];\r\nvar emissoresDebitoMobilidade = [\r\n  \"Uber\",\r\n  \"STCP\",\r\n  \"Metro Porto\",\r\n  \"Metro Lisboa\",\r\n  \"Rede Expressos\",\r\n  \"CP\",\r\n  \"Táxis Lisboa\",\r\n];\r\nvar emissoresDebitoImpostosETaxas = [\r\n  \"Finanças\",\r\n  \"Segurança Social\",\r\n  \"IRS\",\r\n  \"IMI\",\r\n];\r\nvar emissoresDebitoSeguros = [\r\n  \"Seguro Social\",\r\n  \"Seguro de Acidentes de Trabalho\",\r\n  \"Seguro de Acidentes Pessoais\",\r\n  \"Seguro de Saúde\",\r\n  \"Seguro de Vida\",\r\n  \"Seguro de Incapacidade Temporária\",\r\n  \"Seguro de Incapacidade Permanente\",\r\n  \"Seguro de Acidentes de Trabalho\",\r\n  \"Seguro de Acidentes Pessoais\",\r\n  \"Seguro de Saúde\",\r\n  \"Seguro de Vida\",\r\n  \"Seguro de Incapacidade Temporária\",\r\n  \"Seguro de Incapacidade Permanente\",\r\n  \"Seguro de Acidentes de Trabalho\",\r\n  \"Seguro de Acidentes Pessoais\",\r\n  \"Seguro de Saúde\",\r\n  \"Seguro de Vida\",\r\n  \"Seguro de Incapacidade Temporária\",\r\n  \"Seguro de Incapacidade Permanente\",\r\n  \"Seguro de Acidentes de Trabalho\",\r\n  \"Seguro de Acidentes Pessoais\",\r\n  \"Seguro de Saúde\",\r\n  \"Seguro de Vida\",\r\n  \"Seguro de Incapacidade Temporária\",\r\n  \"Seguro de Incapacidade Permanente\",\r\n  \"Seguro de Acidentes de Trabalho\",\r\n  \"Seguro de Acidentes Pessoais\",\r\n  \"Seguro de Saúde\",\r\n  \"Seguro de Vida\",\r\n  \"Seguro de Incapacidade Temporária\",\r\n  \"Seguro de Incapacidade Permanente\",\r\n  \"Seguro de Acidentes de Trabalho\",\r\n  \"Seguro de Acidentes Pessoais\",\r\n  \"Seguro de Saúde\",\r\n  \"Seguro de Vida\",\r\n  \"Seguro de Incapacidade Temporária\",\r\n  \"Seguro de Incapacidade Permanente\",\r\n  \"Seguro de Acidentes de Trabalho\",\r\n  \"Seguro de Acidentes Pessoais\",\r\n  \"Seguro de Saúde\",\r\n  \"Seguro de Vida\",\r\n  \"Seguro de Incapacidade Temporária\",\r\n  \"Seguro de Incapacidade Permanente\",\r\n  \"Seguro de Acidentes de Trabalho\",\r\n  \"Seguro de Acidentes Pessoais\",\r\n  \"Seguro de Saúde\",\r\n  \"Seguro de Vida\",\r\n  \"Seguro de Incapacidade Temporária\",\r\n  \"Seguro de Incapacidade\",\r\n];\r\n\r\nvar emissoresDebitoCulturaEHobbies = [\r\n  \"TNSJ\",\r\n  \"Teatro Circo\",\r\n  \"Nos Cinemas\",\r\n  \"Rivoli\",\r\n  \"Teatro Sá da Bandeira\",\r\n  \"Politeama\",\r\n  \"Museu Nacional\",\r\n  \"Museu de Arte Contemporânea\",\r\n  \"Museu do Fado\",\r\n];\r\nvar emissoresDebitoRestaurantesECafés = [\r\n  \"Tasca do Esteves\",\r\n  \"McDonalds\",\r\n  \"Burguer King\",\r\n  \"Chimarrão\",\r\n  \"Taco Bell\",\r\n  \"Café do Luís\",\r\n  \"Baroque\",\r\n  \"Starbucks\",\r\n  \"Costa Café\",\r\n  \"Carpe Diem\",\r\n  \"KFC\",\r\n  \"Wok to Walk\",\r\n  \"Poke House\",\r\n  \"Italian Republic\",\r\n  \"Pizza Hut\",\r\n  \"H3\",\r\n  \"Telepizza\",\r\n  \"Dominos Pizza\",\r\n];\r\nvar emissoresDebitoSaúde = [\r\n  \"Hospital S.João\",\r\n  \"Trofa Saúde\",\r\n  \"Lusíadas\",\r\n  \"Hospital da Luz\",\r\n  \"Clínica do Esteves\",\r\n  \"USF Braga Norte\",\r\n];\r\nvar emissoresDebitoViagens = [\r\n  \"Ryanair\",\r\n  \"EasyJet\",\r\n  \"Wiz Air\",\r\n  \"Iberia\",\r\n  \"Lufthansa\",\r\n  \"Air France\",\r\n  \"Air Emirates\",\r\n  \"TAP Portugal\",\r\n  \"Sata Internacional\",\r\n  \"British Airways\",\r\n  \"Delta Airlines\",\r\n];\r\nvar emissoresDebitoEducação = [\r\n  \"Universidade do Minho\",\r\n  \"Universidade do Porto\",\r\n  \"Porto Editora\",\r\n  \"Areal Editores\",\r\n  \"Texto Editores\",\r\n  \"Livraria Lello\",\r\n  \"Livraria Almedina\",\r\n  \"Bertrand\",\r\n  \"Fnac Portugal\",\r\n  \"Universidade Nova de Lisboa\",\r\n  \"Instituo Superior Técnico\",\r\n];\r\nvar emissoresDebitoSupermercadosELojas = [\r\n  \"Pingo Doce\",\r\n  \"Continente\",\r\n  \"Mercearia do Esteves\",\r\n  \"Lidl\",\r\n  \"E.leclerc\",\r\n  \"Jumbo\",\r\n  \"Auchan\",\r\n  \"Mercadona\",\r\n  \"Aldi\",\r\n  \"Minipreço\",\r\n  \"Mercearia da Tasquinha\",\r\n];\r\nvar emissoresDebitoCreditoEComissões = [\r\n  \"Cetelem\",\r\n  \"BPI\",\r\n  \"CGD\",\r\n  \"Cofidis\",\r\n  \"Wizink\",\r\n];\r\nvar emissoresDebitoEntretenimento = [\r\n  \"Netflix\",\r\n  \"Spotify\",\r\n  \"Apple Music\",\r\n  \"Youtube Premium\",\r\n  \"Google\",\r\n  \"Apple\",\r\n  \"Podcasts do Esteves\",\r\n];\r\nvar emissoresDebitoDesporto = [\r\n  \"Clube de Ténis\",\r\n  \"Bpadel\",\r\n  \"Clube de Hipismo\",\r\n  \"Clube do Rio\",\r\n  \"Clube de Golfe\",\r\n  \"Aluguer campo futebol\",\r\n  \"Ginásio Fitness\",\r\n];\r\nvar emissoresDebitoInvestimentos = [\r\n  \"XTB\",\r\n  \"Binance\",\r\n  \"MEXC\",\r\n  \"Forex\",\r\n  \"Rendas\",\r\n  \"Etoro\",\r\n];\r\n\r\nvar emissoresCreditoFamilia = [\"Herança\", \"Prenda\"];\r\nvar emissoresCreditoSemCategoria = [\r\n  \"Transferência Bancária de João\",\r\n  \"Transferência Bancária de Joana\",\r\n  \"Transferência MBWAY de Miguel\",\r\n  \"Transferência bancária de Alberto\",\r\n  \"Reembolso\",\r\n];\r\nvar emissoresCreditoInvestimentos = [\r\n  \"Criptomoedas\",\r\n  \"Forex\",\r\n  \"PPRs\",\r\n  \"Dividendos\",\r\n  \"Rendas\",\r\n];\r\n\r\n//Gerar uma transação aleatória\r\nTransactions.newTransaction = function (statementID) {\r\n  //Random date and time between now and yesterday\r\n  var tmpCategoria = \"\";\r\n  var tmpEmissor = \"\";\r\n  var tmpDescricao = \"\";\r\n  var tmpValor = 0;\r\n  var tmpMoeda = moeda[Math.floor(Math.random() * moeda.length)];\r\n  var date = new Date();\r\n  var yesterday = new Date();\r\n  yesterday.setDate(yesterday.getDate() - 1);\r\n  var randomDate = new Date(\r\n    yesterday.getTime() + Math.random() * (date.getTime() - yesterday.getTime())\r\n  );\r\n\r\n  var tmpTipo = tipos[Math.floor(Math.random() * tipos.length)];\r\n  if (tmpTipo == \"Debito\") {\r\n    tmpCategoria =\r\n      categoriasDebito[Math.floor(Math.random() * categoriasDebito.length)];\r\n    switch (tmpCategoria) {\r\n      case \"Cultura e Hobbies\":\r\n        tmpEmissor =\r\n          emissoresDebitoCulturaEHobbies[\r\n            Math.floor(Math.random() * emissoresDebitoCulturaEHobbies.length)\r\n          ];\r\n        break;\r\n      case \"Restaurantes e Cafés\":\r\n        tmpEmissor =\r\n          emissoresDebitoRestaurantesECafés[\r\n            Math.floor(Math.random() * emissoresDebitoRestaurantesECafés.length)\r\n          ];\r\n        break;\r\n      case \"Saúde\":\r\n        tmpEmissor =\r\n          emissoresDebitoSaúde[\r\n            Math.floor(Math.random() * emissoresDebitoSaúde.length)\r\n          ];\r\n        break;\r\n      case \"Viagens\":\r\n        tmpEmissor =\r\n          emissoresDebitoViagens[\r\n            Math.floor(Math.random() * emissoresDebitoViagens.length)\r\n          ];\r\n        break;\r\n      case \"Educação\":\r\n        tmpEmissor =\r\n          emissoresDebitoEducação[\r\n            Math.floor(Math.random() * emissoresDebitoEducação.length)\r\n          ];\r\n        break;\r\n      case \"Supermercados e Lojas\":\r\n        tmpEmissor =\r\n          emissoresDebitoSupermercadosELojas[\r\n            Math.floor(\r\n              Math.random() * emissoresDebitoSupermercadosELojas.length\r\n            )\r\n          ];\r\n        break;\r\n      case \"Credito e Comissões\":\r\n        tmpEmissor =\r\n          emissoresDebitoCreditoEComissões[\r\n            Math.floor(Math.random() * emissoresDebitoCreditoEComissões.length)\r\n          ];\r\n        break;\r\n      case \"Entretenimento\":\r\n        tmpEmissor =\r\n          emissoresDebitoEntretenimento[\r\n            Math.floor(Math.random() * emissoresDebitoEntretenimento.length)\r\n          ];\r\n        break;\r\n      case \"Desporto\":\r\n        tmpEmissor =\r\n          emissoresDebitoDesporto[\r\n            Math.floor(Math.random() * emissoresDebitoDesporto.length)\r\n          ];\r\n        break;\r\n      case \"Investimentos\":\r\n        tmpEmissor =\r\n          emissoresDebitoInvestimentos[\r\n            Math.floor(Math.random() * emissoresDebitoInvestimentos.length)\r\n          ];\r\n        break;\r\n      case \"Sem Categoria\":\r\n        tmpEmissor =\r\n          emissoresDebitoSemCategoria[\r\n            Math.floor(Math.random() * emissoresDebitoSemCategoria.length)\r\n          ];\r\n        break;\r\n      case \"Seguros\":\r\n        tmpEmissor =\r\n          emissoresDebitoSeguros[\r\n            Math.floor(Math.random() * emissoresDebitoSeguros.length)\r\n          ];\r\n        break;\r\n      case \"Impostos e Taxas\":\r\n        tmpEmissor =\r\n          emissoresDebitoImpostosETaxas[\r\n            Math.floor(Math.random() * emissoresDebitoImpostosETaxas.length)\r\n          ];\r\n        break;\r\n      case \"Casa\":\r\n        tmpEmissor =\r\n          emissoresDebitoCasa[\r\n            Math.floor(Math.random() * emissoresDebitoCasa.length)\r\n          ];\r\n        break;\r\n      case \"Mobilidade\":\r\n        tmpEmissor =\r\n          emissoresDebitoMobilidade[\r\n            Math.floor(Math.random() * emissoresDebitoMobilidade.length)\r\n          ];\r\n        break;\r\n    }\r\n    tmpValor = Math.floor(Math.random() * 400) + 1;\r\n  } else {\r\n    tmpCategoria =\r\n      categoriasCredito[Math.floor(Math.random() * categoriasCredito.length)];\r\n    switch (tmpCategoria) {\r\n      case \"Familia\":\r\n        tmpEmissor =\r\n          emissoresCreditoFamilia[\r\n            Math.floor(Math.random() * emissoresCreditoFamilia.length)\r\n          ];\r\n        break;\r\n      case \"Sem Categoria\":\r\n        tmpEmissor =\r\n          emissoresCreditoSemCategoria[\r\n            Math.floor(Math.random() * emissoresCreditoSemCategoria.length)\r\n          ];\r\n        break;\r\n      case \"Investimentos\":\r\n        tmpEmissor =\r\n          emissoresCreditoInvestimentos[\r\n            Math.floor(Math.random() * emissoresCreditoInvestimentos.length)\r\n          ];\r\n        break;\r\n    }\r\n    tmpValor = Math.floor(Math.random() * 700) + 1;\r\n  }\r\n\r\n  tmpDescricao = tmpEmissor + \" - \" + tmpCategoria;\r\n\r\n  var transaction = new Transaction({\r\n    _id: new mongoose.Types.ObjectId(),\r\n    type: tmpTipo,\r\n    date: randomDate,\r\n    issuer: tmpEmissor,\r\n    description: tmpDescricao,\r\n    value: tmpValor,\r\n    category: tmpCategoria,\r\n    currency: tmpMoeda,\r\n    statement: statementID,\r\n  });\r\n  return transaction;\r\n};\r\n\r\n//Create a single transaction\r\nTransactions.create = async function (transaction, callback) {\r\n  try {\r\n    var trans = new Transaction(transaction);\r\n    trans = await trans.save();\r\n    console.log(\"Transaction created\");\r\n    callback(null, transaction);\r\n  } catch (err) {\r\n    console.log(err);\r\n    callback(err, null);\r\n  }\r\n};\r\n"
        }
    ]
}