{
    "sourceFile": "api/app.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1669735654829,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1669735899198,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,6 +7,15 @@\n @app.route('/', methods=['GET'])\r\n def home():\r\n     return \"<h1>Distant Reading Archive</h1><p>This site is a prototype API for distant reading of science fiction novels.</p>\"\r\n \r\n+\r\n+@app.route('/upload', methods=['POST'])\r\n+@cross_origin() (origin='*', headers=['Content-Type', 'Authorization'])\r\n+\r\n+\r\n+\r\n+\r\n app.run()\r\n \r\n+\r\n+\r\n"
                },
                {
                    "date": 1669735913097,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n     return \"<h1>Distant Reading Archive</h1><p>This site is a prototype API for distant reading of science fiction novels.</p>\"\r\n \r\n \r\n @app.route('/upload', methods=['POST'])\r\n-@cross_origin() (origin='*', headers=['Content-Type', 'Authorization'])\r\n+@cross_origin(origin='*', headers=['Content-Type'])\r\n \r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1669735926892,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,8 @@\n-import flask\r\n+from flask import Flask, request, jsonify\r\n+from flask_cors import CORS, cross_origin\r\n \r\n+\r\n app = flask.Flask(__name__)\r\n app.config[\"DEBUG\"] = True\r\n \r\n \r\n"
                },
                {
                    "date": 1669735934767,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n from flask import Flask, request, jsonify\r\n from flask_cors import CORS, cross_origin\r\n \r\n \r\n-app = flask.Flask(__name__)\r\n+app = Flask(__name__)\r\n app.config[\"DEBUG\"] = True\r\n \r\n \r\n @app.route('/', methods=['GET'])\r\n"
                },
                {
                    "date": 1669736159293,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,23 +1,37 @@\n from flask import Flask, request, jsonify\r\n from flask_cors import CORS, cross_origin\r\n+import os\r\n \r\n \r\n app = Flask(__name__)\r\n app.config[\"DEBUG\"] = True\r\n \r\n \r\n+\r\n+CORS(app, resources={r\"/api/*\": {\"origins\": \"*\"}})\r\n+app.config['CORS_HEADERS'] = 'Content-Type'\r\n+\r\n+\r\n @app.route('/', methods=['GET'])\r\n def home():\r\n     return \"<h1>Distant Reading Archive</h1><p>This site is a prototype API for distant reading of science fiction novels.</p>\"\r\n \r\n \r\n @app.route('/upload', methods=['POST'])\r\n @cross_origin(origin='*', headers=['Content-Type'])\r\n-\r\n-\r\n-\r\n-\r\n+def upload_single_image():\r\n+    if request.method == \"POST\":\r\n+        file = request.files['file']\r\n+        try:\r\n+            file.save(os.getcwd() + \"/uploads/\" + file.filename)\r\n+            \r\n+        except FileNotFoundError:\r\n+            return \"Folder not on path\"\r\n+        \r\n+if __name__ == \"__main__\":\r\n+    app.run(debug=True, port=5000, host=\"0.0.0.0\")\r\n+    \r\n app.run()\r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1669736264725,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n \r\n \r\n @app.route('/', methods=['GET'])\r\n def home():\r\n-    return \"<h1>Distant Reading Archive</h1><p>This site is a prototype API for distant reading of science fiction novels.</p>\"\r\n+    return \"<h1>PUTAS E VINHO verde <h1/>\"\r\n \r\n \r\n @app.route('/upload', methods=['POST'])\r\n @cross_origin(origin='*', headers=['Content-Type'])\r\n"
                },
                {
                    "date": 1669736379057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n def upload_single_image():\r\n     if request.method == \"POST\":\r\n         file = request.files['file']\r\n         try:\r\n-            file.save(os.getcwd() + \"/uploads/\" + file.filename)\r\n+            file.save(os.getcwd() + \"/receivedFiles/\" + file.filename)\r\n             \r\n         except FileNotFoundError:\r\n             return \"Folder not on path\"\r\n         \r\n"
                },
                {
                    "date": 1669736421239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,10 @@\n     if request.method == \"POST\":\r\n         file = request.files['file']\r\n         try:\r\n             file.save(os.getcwd() + \"/receivedFiles/\" + file.filename)\r\n-            \r\n+            print(file)\r\n+            return jsonify({\"message\": \"File uploaded successfully\"})\r\n         except FileNotFoundError:\r\n             return \"Folder not on path\"\r\n         \r\n if __name__ == \"__main__\":\r\n"
                },
                {
                    "date": 1669736667651,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,11 @@\n from flask import Flask, request, jsonify\r\n from flask_cors import CORS, cross_origin\r\n import os\r\n+import ocr.textparse as tp\r\n \r\n \r\n+\r\n app = Flask(__name__)\r\n app.config[\"DEBUG\"] = True\r\n \r\n \r\n"
                },
                {
                    "date": 1669738066091,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n from flask import Flask, request, jsonify\r\n from flask_cors import CORS, cross_origin\r\n import os\r\n-import ocr.textparse as tp\r\n+import textparse as tp\r\n \r\n \r\n \r\n app = Flask(__name__)\r\n@@ -25,10 +25,13 @@\n     if request.method == \"POST\":\r\n         file = request.files['file']\r\n         try:\r\n             file.save(os.getcwd() + \"/receivedFiles/\" + file.filename)\r\n-            print(file)\r\n-            return jsonify({\"message\": \"File uploaded successfully\"})\r\n+            try:\r\n+                text = tp.parse(os.getcwd() + \"/receivedFiles/\" + file.filename)\r\n+                return jsonify(text)\r\n+            except:\r\n+                return jsonify(\"Error parsing text\")\r\n         except FileNotFoundError:\r\n             return \"Folder not on path\"\r\n         \r\n if __name__ == \"__main__\":\r\n"
                }
            ],
            "date": 1669735654829,
            "name": "Commit-0",
            "content": "import flask\r\n\r\napp = flask.Flask(__name__)\r\napp.config[\"DEBUG\"] = True\r\n\r\n\r\n@app.route('/', methods=['GET'])\r\ndef home():\r\n    return \"<h1>Distant Reading Archive</h1><p>This site is a prototype API for distant reading of science fiction novels.</p>\"\r\n\r\napp.run()\r\n\r\n"
        }
    ]
}